(this["webpackJsonprest-countries"]=this["webpackJsonprest-countries"]||[]).push([[0],{19:function(e,t,n){},20:function(e,t,n){},21:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n.n(c),a=n(12),i=n.n(a),s=(n(19),n(20),n(21),n(10)),o=n(9),l=n(5),u=n(1),d=r.a.createContext({darkMode:!1,onSwitchMode:function(){}}),j=function(e){var t=Object(c.useState)("light"),n=Object(l.a)(t,2),r=n[0],a=n[1];return Object(u.jsx)(d.Provider,{value:{darkMode:r,onSwitchMode:function(){"light"===r&&(a("dark"),d.darkMode=!0),"dark"===r&&(a("light"),d.darkMode=!1)}},children:Object(u.jsx)("div",{className:r,children:e.children})})},b=d,O=function(){var e=Object(c.useContext)(b);return Object(u.jsxs)("div",{className:"title",children:[Object(u.jsx)("h3",{children:"Where in the world?"}),Object(u.jsxs)("div",{onClick:e.onSwitchMode,children:["dark"===e.darkMode&&Object(u.jsx)(o.b,{className:"moon"}),"light"===e.darkMode&&Object(u.jsx)(s.a,{className:"moon"}),"Dark Mode"]})]})},f=(n(23),r.a.createContext({listed:[],detailed:[],detailedView:!1,searchCountry:function(e){},filterCountry:function(e){},detailCountry:function(e){}})),h=function(){var e=Object(c.useContext)(f),t=Object(c.useState)(""),n=Object(l.a)(t,2),r=n[0],a=n[1];Object(c.useEffect)((function(){var t=setTimeout((function(){r.length>0&&e.searchCountry(r)}),500);return function(){clearTimeout(t)}}),[r]);return Object(u.jsx)("form",{onSubmit:function(t){t.preventDefault(),e.searchCountry(r)},children:Object(u.jsxs)("div",{children:[Object(u.jsx)(s.b,{className:"search"}),Object(u.jsx)("input",{type:"text",placeholder:"Search for a country...",onChange:function(e){var t=e.target.value;a(t)}})]})})},m=(n(24),n(13)),x=function(e){var t=Object(c.useState)(!1),n=Object(l.a)(t,2),r=n[0],a=n[1],i=Object(c.useContext)(f),s=function(e){var t=e.target.dataset.region;a(!1),i.filterCountry(t)};return Object(u.jsxs)("div",{className:"filter--select filter",children:[Object(u.jsxs)("div",{className:"select",onClick:function(){!r&&a(!0),r&&a(!1)},children:["Filter by Region ",Object(u.jsx)(m.a,{className:"arrowDown"})]}),r&&Object(u.jsxs)("div",{className:"options",children:[Object(u.jsx)("div",{"data-region":"Africa",onClick:s,children:"Africa"}),Object(u.jsx)("div",{"data-region":"Americas",onClick:s,children:"Americas"}),Object(u.jsx)("div",{"data-region":"Asia",onClick:s,children:"Asia"}),Object(u.jsx)("div",{"data-region":"Europe",onClick:s,children:"Europe"}),Object(u.jsx)("div",{"data-region":"Oceania",onClick:s,children:"Oceania"})]})]})},p=(n(25),function(e){var t=Object(c.useContext)(f),n=function(e){var n=e.target.closest(".country").id;t.detailCountry(n)},r=t.listed.map((function(e,t){return Object(u.jsxs)("article",{className:"country",id:e.name.common,onClick:n,children:[Object(u.jsx)("div",{className:"flag",children:Object(u.jsx)("img",{className:"flag",src:e.flags.svg,alt:"flag"})}),Object(u.jsx)("div",{className:"stats",children:Object(u.jsxs)("ul",{className:"country-stats",children:[Object(u.jsx)("li",{children:Object(u.jsx)("h3",{children:e.name.common})},e.name.common+t),Object(u.jsxs)("li",{children:[Object(u.jsx)("span",{children:"Population:"})," ",(new Intl.NumberFormat).format(e.population)]},"".concat(e.population+e.name)),Object(u.jsxs)("li",{children:[Object(u.jsx)("span",{children:"Region: "})," ",e.region]},"".concat(e.name+e.region)),Object(u.jsxs)("li",{children:[Object(u.jsx)("span",{children:"Capital: "}),e.capital]},"".concat(e,".capital"))]})})]},"".concat(e.name.common).concat(t))}));return Object(u.jsx)("main",{className:"countries--container",children:r})}),v=n(14),C=(n(26),function(){var e=Object(c.useContext)(f),t=function(t){var n=t.target.closest(".bord").id;e.detailCountry(n)},n=e.borders.map((function(e,n){return Object(u.jsx)("li",{id:e,value:e,className:"bord",onClick:t,children:e},"".concat(e).concat(n))}));return Object(u.jsx)(c.Fragment,{children:n})}),g=function(){var e=Object(c.useContext)(f),t=e.detailed,n=Object.values(t.currencies).map((function(e){return e.name})).join(", "),r=Object.values(t.languages).join(", "),a=Object(u.jsxs)("section",{className:"details",children:[Object(u.jsxs)("button",{className:"button-back",onClick:function(){e.changeView()},children:[Object(u.jsx)(o.a,{className:"arrowLeft"}),"Back"]}),Object(u.jsxs)("main",{className:"details--country--container",children:[Object(u.jsx)("img",{className:"flag-detail",src:t.flags.svg,alt:"flag"}),Object(u.jsxs)("div",{className:"stats--container",children:[Object(u.jsx)("h2",{children:t.name.common}),Object(u.jsxs)("div",{className:"stats--inner--container",children:[Object(u.jsxs)("ul",{className:"detail-stats stats",children:[Object(u.jsxs)("li",{children:[Object(u.jsx)("span",{children:"Native Name:"})," ",t.name.official]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("span",{children:"Population:"})," ",(new Intl.NumberFormat).format(t.population)]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("span",{children:"Region: "})," ",t.region]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("span",{children:"Sub Region: "})," ",t.subregion]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("span",{children:"Capital: "})," ",t.capital]})]}),Object(u.jsxs)("ul",{className:"detail-stats-two stats",children:[Object(u.jsxs)("li",{children:[Object(u.jsx)("span",{children:"Top Level Domain: "}),Object(v.a)(t.tld)]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("span",{children:"Currencies: "})," ",n]}),Object(u.jsxs)("li",{children:[Object(u.jsx)("span",{children:"Languages: "})," ",r]})]}),Object(u.jsxs)("div",{className:"detail-stats-three",children:[Object(u.jsx)("h4",{children:" Border Countries:"}),Object(u.jsx)("ul",{className:"border-countries",children:e.borders&&Object(u.jsx)(C,{})})]})]})]})]})]});return Object(u.jsxs)(c.Fragment,{children:[" ",a]})},y=function(){var e=Object(c.useContext)(f);return Object(u.jsxs)("main",{children:[!e.detailedView&&Object(u.jsx)(c.Fragment,{children:Object(u.jsxs)("header",{className:"container-search",children:[Object(u.jsx)(h,{}),Object(u.jsx)(x,{})]})}),!e.detailedView&&Object(u.jsx)(p,{}),e.detailedView&&Object(u.jsx)(g,{})]})};var N=function(){var e=Object(c.useContext)(f);return Object(c.useEffect)((function(){e.checkLocal(),e.fetchCountries(),setTimeout((function(){}),500)}),[]),Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)("header",{children:Object(u.jsx)(O,{})}),Object(u.jsx)(y,{})]})},w=n(3),k=n.n(w),E=n(6),S=n(4),L=function(){var e=Object(E.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){setTimeout((function(){n(new Error("Request took too long! ".concat(t," secondes passed!")))}),1e3*t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(E.a)(k.a.mark((function e(){var t,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.race([fetch("https://restcountries.com/v3.1/all"),L(2)]);case 3:if((t=e.sent).ok){e.next=6;break}throw new Error((function(e){return console.error(e.message)}));case 6:return e.next=8,t.json();case 8:return n=e.sent,e.abrupt("return",n);case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),V={all:[],listed:[],unique:[],detailed:[],detailedView:!1,borders:[],searchCountryHandler:function(e){},filterCountryHandler:function(e){},detailCountryHandler:function(e){},changeViewHandler:function(e){},fetchCountries:function(){}},T=function(e,t){var n=e.allCountries,c=t.entry;if("SEARCH"===t.type){var r=n.filter((function(e){return e.name.common.toLowerCase().includes(c)}));return Object(S.a)(Object(S.a)({},e),{},{listed:r})}if("FILTER"===t.type){var a=n.filter((function(e){return e.region===c}));return Object(S.a)(Object(S.a)({},e),{},{listed:a,detailedView:!1})}if("CHANGEVIEW"===t.type)return Object(S.a)(Object(S.a)({},e),{},{detailedView:!1});if("DETAILED"===t.type){var i,s=n.find((function(e){return e.name.common===t.id})),o=null!==(i=s.borders)&&void 0!==i?i:null,l=null===o||void 0===o?void 0:o.map((function(e){return n.filter((function(t){return t.cca3===e}))})).flat().map((function(e){return e.name.common}));return Object(S.a)(Object(S.a)({},e),{},{detailedView:!0,detailed:s,borders:l})}if("FETCHALL"===t.type){var u=t.countries,d=JSON.stringify(u);return localStorage.setItem("countries",d),Object(S.a)(Object(S.a)({},e),{},{allCountries:u})}if("FETCHLOCAL"===t.type){var j=t.countries;return Object(S.a)(Object(S.a)({},e),{},{allCountries:j})}},F=function(e){var t=Object(c.useReducer)(T,V),n=Object(l.a)(t,2),r=n[0],a=n[1],i=function(){var e=Object(E.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:t=e.sent,a({type:"FETCHALL",countries:t});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s={allCountries:r.allCountries,listed:r.listed,detailed:r.detailed,detailedView:r.detailedView,borders:r.borders,searchCountry:function(e){a({type:"SEARCH",entry:e})},filterCountry:function(e){a({type:"FILTER",entry:e})},detailCountry:function(e){a({type:"DETAILED",id:e})},changeView:function(){a({type:"CHANGEVIEW"})},fetchCountries:i,checkLocal:function(){var e,t=null!==(e=localStorage.getItem("countries"))&&void 0!==e?e:"",n=t.startsWith('[{"name":{"common":"El Salvador",'),c=t.includes('{"USD":{"name":"United States dollar","symbol":"$"}},"idd":{"root":');if(!n||!c)return!1;var r=JSON.parse(t);a({type:"FETCHLOCAL",countries:r})}};return Object(u.jsx)(f.Provider,{value:s,children:e.children})};i.a.render(Object(u.jsx)(j,{children:Object(u.jsx)(F,{children:Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(N,{})})})}),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.2218fa6c.chunk.js.map